<!DOCTYPE html><html><head><head> <!-- Include Meta Tags Here --><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="viewport" content="width=device-width, height=device-height, initial-scale=1 user-scalable=no, shrink-to-fit=no"><meta content='#000000' name='theme-color'/><meta name="keywords" content="Site, Template, Theme"><title>Portfolio | Magnet Pong</title><!-- Open Graph general (Facebook, Pinterest & Google+) --><meta name="og:title" content="Portfolio | Magnet Pong"><meta name="og:description" content="Pong with a ball and paddle out of magnets"><meta name="og:image" content="/assets/images/MagnetPong.jpg"><meta name="og:image:alt" content="Portfolio | Magnet Pong"><meta name="og:url" content="jonasb.at/blog/Magnet-Pong"><meta name="article:author" content="https://www.facebook.com/"><meta name="og:site_name" content="Portfolio | Magnet Pong"><meta name="og:type" content="website"> <!-- Twitter --><meta property="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Portfolio | Magnet Pong"><meta name="twitter:description" content="Pong with a ball and paddle out of magnets"><meta name="twitter:site" content="@Caesiumhydroxid"><meta name="twitter:creator" content="@Caesiumhydroxid"><meta name="twitter:image:src" content="/assets/images/MagnetPong.jpg"> <!-- Search Engine --><meta name="description" content="Pong with a ball and paddle out of magnets"><meta name="image" content="/assets/images/MagnetPong.jpg"> <!-- Schema.org for Google --><meta itemprop="name" content="Portfolio | Magnet Pong"><meta name="author" content="Jonas Bodingbauer"/><meta itemprop="description" content="Pong with a ball and paddle out of magnets"><meta itemprop="image" content="/assets/images/MagnetPong.jpg"><title>Portfolio</title><link rel="stylesheet" href="/assets/css/style.css"> <script src="https://kit.fontawesome.com/6a97161b76.js" async defer crossorigin="anonymous"></script><link rel="shortcut icon" href="/assets/images/logo.png" type="image/x-icon"><link rel="dns-prefetch" href="https://app-worker.visitor-analytics.io/"></head></head><body><nav class="navbar is-black is-fixed-top" role="navigation" aria-label="main navigation" id="navbar"><div class="container"> <!-- logo or branding image on left side --><div class="navbar-brand"> <a class="navbar-item" href="/"> <strong>Portfolio</strong> </a><div class="navbar-burger" data-target="navbar-menu"> <span></span> <span></span> <span></span></div></div><!-- children of navbar-menu must be navbar-start and/or navbar-end --><div class="navbar-menu has-background-black" id="navbar-menu"> <!-- navbar items | left side --> <!--<div class="navbar-start"></div>--> <!-- navbar items | right side --><div class="navbar-end"> <a class="navbar-item " href="/">HOME</a> <a class ="navbar-item" href = "/#project">PROJECTS</a> <a class="navbar-item" href="/#about">ABOUT</a> <a class="navbar-item" href="/#contact">CONTACT</a></div></div></div></nav><!-- Bulma Navbar JS --> <script> document.addEventListener('DOMContentLoaded', function () { /* Get all "navbar-burger" elements */ var $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0); /* Check if there are any navbar burgers */ if ($navbarBurgers.length > 0) { /* Add a click event on each of them */ $navbarBurgers.forEach(function ($el) { $el.addEventListener('click', function () { /* Get the target from the "data-target" attribute */ var target = $el.dataset.target; var $target = document.getElementById(target); /* Toggle the class on both the "navbar-burger" and the "navbar-menu" */ $el.classList.toggle('is-active'); $target.classList.toggle('is-active'); }); }); } }); </script><section class="hero is-fullheight has-text-centered" id="hero" style="--background-image:url(/assets/images/MagnetPong.jpg);"> <video playsinline autoplay muted loop poster="/assets/images/MagnetPong.jpg" id="video"> <source src="/assets/videos/MagnetPong.webm" type="video/webm"> </video><div class="hero-body"><div class="container"><h1 class="title has-text-white is-size-1 is-uppercase has-text-weight-bold"> Magnet Pong</h1><h3 class="subtitle has-text-white-bis is-uppercase has-text-weight-medium is-marginless"> Pong with a ball and paddle out of magnets</h3><hr></div></div></section><section class="hero is-fullheight has-text-centered" id="post"><div class="hero-body"><div class="container"><div class="content has-text-justified-desktop has-text-justified-fullhd has-text-justified has-text-justified-tablet has-text-left-mobile"><p><h1 id="description">Description</h1><p>This project is largely inspired by the <a href="https://hackaday.io/project/164507-2d-stepper-motor-etched-on-pcb-micro-manipulator">2D stepper motor</a> from <a href="https://hackaday.io/bobricius">bobricius</a> on hackaday. I loved the concept and thought I could make a Pong game from it. Little did I know that driving and designing this thing would result in lots of tinkering and head scratching but in the end I got my first (and only) PCB to work the way I wanted.</p><h1 id="design">Design</h1><p>With this project I not only wanted to try to build a Pong-Game, I also wanted to try out the SMT assembly service of <a href="https://jlcpcb.com/">jlcpcb</a>. This influenced a lot of part choices - a good example for this is the <a href="https://datasheet.lcsc.com/szlcsc/1810161611_Mixic-MX612E_C110207.pdf">H-Bridge IC</a>. Since I do not speak Chinese, I could not read the datasheet in its entirety and just hoped for the best.</p><h2 id="working-principle">Working principle</h2><p>The basic principle is the one of a stepper motor - just unfolded to a linear plane. There are 4 connections for each paddle and 8 connections (because of the x and y coordinate) for the ball. The PCB has two layers and the top and bottom layers are used for x and y coordinates respectively.</p><h2 id="schematic">Schematic</h2><p>The schematic is quite straightforward. Each linear stepper uses two H-Bridge drivers. The rest of the components just connects the H-Bridges, switches and power supply to the STM microcontroller. At first, I thought I might need a lot of power-resistors for driving the paddles. In the process of developing the software, I noticed that PWM was very effective and therefore I did not need to populate these and would definitely omit these in a redesign.</p><figure> <img class="post-image" src="/assets/images/PongSchematic.svg" /><figcaption>Schmatic for the PCB</figcaption></figure><h2 id="pcb">PCB</h2><p>I thought a lot about the thickness of the traces used for the steppers and I definitely wanted to make the wires on the bottom layer a little thicker to allow for more current. Because these are farther away from the magnets than the top layer and therefore need more current to achieve a similar force on the ball. The thickness was chosen to allow for approx. 1A and 1.5A current respectively at 5 V (which worked quite well). Unfortunately I messed up and made the top layer <em>thicker</em> and the bottom layer <em>thinner</em>. At first I thought that I needed to reorder the PCBs - but with some trial and error I could still get this version to work.</p><p>In a redesign, because of the lessons I learned from this prototype, I would obviously correct my mistake and also make traces thicker in general. From testing, I learned that PWM was very effective (during design I was not sure if this would work because I could not read the specification of the H-Bridges and the forces would also be modulated) - but at around 30 kHz (to avoid audible PWM noises) everything works just fine.</p><figure> <img class="post-image" src="/assets/images/PongPCB.svg" /><figcaption>Image of the PCB traces</figcaption></figure><h1 id="software">Software</h1><p>The software of the STM32 is written using the <a href="https://www.st.com/en/development-tools/stm32cubemx.html">STM32CubeMX</a> which was quite new for me as I mainly used ATmega controllers before. The abstraction from the hardware had a lot of pitfalls for me in the beginning, but I quickly learned to appreciate it. I used lots of timers for all the PWM as well as controlling the game. When I could finally control the ball in a more or less reliable way (dust or other contamination sometimes make it lose a step) writing the game was quite straightforward. But until I managed to get the ball to behave I needed to go through quite a lot of things:</p><ol><li>controlling the x-Axis (top-side)</li><li>almost frying my H-bridges in the process</li><li>try adding the y-Axis</li><li>losing steps all the time on the y-Axis</li><li>almost frying my H-bridges again</li><li>adding PWM to x and y</li><li>noticing that drastically reducing current (though PWM) on the x-Axis helped a lot as friction decreased</li><li>tuning maximum step speed, PWM phase angles, PWM frequency,…</li></ol><p>After a lot of debugging I finally ended up with a quite functional version for controlling the ball - controlling the paddles was “a walk in the park” comparatively, since they only had traces on the top layer.</p><h2 id="gamemodes">Gamemodes</h2><p>Obviously there is a <strong>two player</strong> mode letting them compete. The first person to achieve 4 points wins. The points are displayed in binary format using LEDs on the bottom of the PCB.</p><p>I also wrote a <strong>one player</strong> mode. Until now, the opponent is programmed to play flawlessly. Therefore, it does not make a lot of fun to play in this mode at the moment (but was perfect for shooting the video at the top ;) ). If I have some free time (which is quite rare as I am writing this) I am probably going to change that.</p><h1 id="results">Results</h1><p>I am very happy about the outcome of this as everything works quite well by now. Playing with a physical object instead on a screen definitely changes the feel of the game - in my opinion in a very positive way.</p><figure> <img class="post-image" src="/assets/images/MagnetPong.jpg" /><figcaption>Image of the real thing</figcaption></figure><p>I really learned a lot in the process of creating this game and hope that other people might like it as well :)</p><p><a href="/assets/files/MagnetPong.zip">KiCad-Files</a></p><p>Write me a message if you want the source code. I also have some unused boards lying around at home - if you want one - you can also drop me a message.</p></p></div><div class="disqus-comments" id="disqus_thread"></div></div></div></section><footer id="footer"> <!-- VISA Tracking Code for jonasb.at --><script>(function(v,i,s,a){if(!v._visaSettings){v._visaSettings={};}v._visaSettings["61655f82-7abc-11eb-b589-901b0edac50a"]={v:"0.3",s:"61655f82-7abc-11eb-b589-901b0edac50a",a:"1"};_v=i.getElementsByTagName("head")[0];_a=_v;_i=i.createElement("script");_s=_i;_s.defer="defer";_s.src=s+a+v._visaSettings["61655f82-7abc-11eb-b589-901b0edac50a"].v;_a.appendChild(_s);})(window,document,"//app-worker.visitor-analytics.io/main",".js?s=61655f82-7abc-11eb-b589-901b0edac50a&v=")</script><!-- VISA Tracking Code for jonasb.at --> <!--Footer Button--><div id="backtotopback"><div class="container has-text-centered has-background-grey-darker" id="backtotop"> <a class="has-text-white" onclick="window.scroll(0,0)">BACK TO TOP</a></div></div><!--Footer Main Section--><div class="has-background-grey-darker"><div class="container columns"> <!--Name Section--><div class="column has-text-left-desktop has-text-centered-mobile"> <a href="jonasb.at/#about"><div class="columns"><div class="column is-one-fifth-desktop is-one-fifth-fullhd is-one-quarter-tablet"><figure class="image is-64x64"> <img class="is-rounded" src="/assets/images/ProfilePicture.JPG"></figure></div><div class="column is-marginless"><h5 class="has-text-grey-lighter">Jonas Bodingbauer</h5><div class="content has-text-grey"><p>I consider myself a<a href="https://en.wikipedia.org/wiki/Maker_culture"...</p></div></div></div></a></div><div class="column has-text-white"> <a href="/privacypolicy">Privacy Policy</a></div><!--Blog-post Section--><div class="column has-text-white"><h3>Most Recent Projects</h3><li> <a href="/blog/Numitron-Clock">Numitron Clock</a></li><li> <a href="/blog/Magnet-Pong">Magnet Pong</a></li><li> <a href="/blog/TheDecision">The Decision</a></li></div></div></div><div class="has-background-black has-text-centered has-text-white" id="credits"> <i class="far fa-copyright"></i> 2021 | Theme Created by me, derived from <a href="https://github.com/thedevslot/WhatATheme" target="_blank" rel="noopener noreferrer">WhatATheme</a> by <a href="https://www.twitter.com/thedevslot" target="_blank" rel="noopener noreferrer">TheDevsLot</a> Powered by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a></div></footer></body><script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/ /* var disqus_config = function () { this.page.url = PAGE_URL; Replace PAGE_URL with your page's canonical URL variable this.page.identifier = PAGE_IDENTIFIER; Replace PAGE_IDENTIFIER with your page's unique identifier variable }; */ (function () { /* DON'T EDIT BELOW THIS LINE */ var d = document, s = d.createElement('script'); s.src = 'https://.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script></html>
